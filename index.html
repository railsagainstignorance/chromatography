<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Chromatography</title>
  <style>
  .blotting-paper {
    border-width: 1px;
    border-color: lightgrey;
    border-style: solid;

    box-shadow: 10px 10px 5px #888888;
  }
  </style>
  <script>
  var Chroma = (function(){
    function createPaper(canvas){
        function addSolvent() {
          console.log(`addSolvent to ${canvas}`);
          var context = canvas.getContext('2d');
          var imageData = context.getImageData(0,0,canvas.width,canvas.height);
          var data = imageData.data;

          for (var i = 0; i < data.length; i += 4) {
            data[i]     = 255 - data[i];     // red
            data[i + 1] = 255 - data[i + 1]; // green
            data[i + 2] = 255 - data[i + 2]; // blue
          }
          context.putImageData(imageData, 0, 0);
        }

        return {
          run: addSolvent
        }
    }

    return {
      create: createPaper
    }
  })();
  </script>
</head>

<body>
  <h1>Chromatography</h1>

    <canvas class="blotting-paper" id="myCanvas" width="400" height="400"></canvas>

  <script>
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');
    var imageObj = new Image();

    imageObj.onload = function() {
      context.drawImage(imageObj, 69, 50);
      var paper = Chroma.create(canvas);
      paper.run();
    };
    imageObj.src = 'assets/splodge.png';
  </script>
</body>
</html>
